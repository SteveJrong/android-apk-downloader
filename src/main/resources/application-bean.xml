<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <context:component-scan base-package="
        com.stevejrong.android.apk.downloader.config,
        com.stevejrong.android.apk.downloader.provider,
        com.stevejrong.android.apk.downloader.logs.aspect,
        com.stevejrong.android.apk.downloader.logs.provider.impl"/>

    <bean id="downloadConfig" class="com.stevejrong.android.apk.downloader.config.download.DownloadConfig">
        <property name="browserName" value="googleChrome"/> <!-- 可选值：googleChrome、mozillaFirefox、appleSafari、microsoftEdge、microsoftInternetExplorer -->
        <property name="browserWebDriverPath" value="/usr/local/bin/chromedriver"/>
        <property name="browserDownloadPath" value="/Users/stevejrong/Desktop/apks"/>
        <property name="appDownloadSitesConfig">
            <list>
                <ref bean="tencentAppDownload"/>
                <ref bean="anZhiAppDownload"/>
            </list>
        </property>
        <property name="currentAppListNodeName" value="my-app-list"/>
    </bean>

    <bean id="anZhiAppDownload" class="com.stevejrong.android.apk.downloader.provider.app.download.appDownload.impl.AnZhiAppDownload">
        <constructor-arg name="searchUrl" value="http://www.anzhi.com/search.php?keyword=#APP_NAME"/>
        <constructor-arg name="htmlAnalysisExpressions">
            <list>
                <value>//div[@class='app_info']/child::span/child::a[text()='#APP_NAME']/ancestor::span[@class='app_name']/ancestor::div[@class='app_info']/following::div[@class='app_down']/child::a[text()='立即下载']</value>
            </list>
        </constructor-arg>
    </bean>
    <bean id="tencentAppDownload" class="com.stevejrong.android.apk.downloader.provider.app.download.appDownload.impl.TencentAppDownload">
        <constructor-arg name="searchUrl" value="https://sj.qq.com/myapp/search.htm?kw=#APP_NAME"/>
        <constructor-arg name="htmlAnalysisExpressions">
            <list>
                <value>//ul[@id='J_SearchDefaultListBox']/child::li/child::div/child::div/child::div/child::a</value>
                <value>//a[@class='det-down-btn']</value>
            </list>
        </constructor-arg>
    </bean>

    <bean id="googleChrome" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.GoogleChromePreferences"/>
    <bean id="mozillaFirefox" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.MozillaFirefoxPreferences"/>
    <bean id="appleSafari" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.AppleSafariPreferences"/>
    <bean id="microsoftEdge" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.MicrosoftEdgePreferences"/>
    <bean id="microsoftInternetExplorer" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.MicrosoftInternetExplorerPreferences"/>

    <!--&lt;!&ndash;日志记录基础Bean&ndash;&gt;
    <bean id="logProviderAdvice" class="com.stevejrong.android.apk.downloader.logs.aspect.LogProviderAdvice"/>

    &lt;!&ndash;APP下载的日志记录业务类&ndash;&gt;
    <bean id="appDownloadLogProvider" class="com.stevejrong.android.apk.downloader.logs.provider.impl.AppDownloadLogProviderImpl"/>

    &lt;!&ndash; 日志切面 &ndash;&gt;
    <aop:aspectj-autoproxy/>
    <aop:config proxy-target-class="true">
        &lt;!&ndash;APP下载 切入点&ndash;&gt;
        <aop:pointcut expression="execution(* com.stevejrong.android.apk.downloader.provider.app.download.appDownload.impl.*.automaticDownload(..))" id="appDownloadPointCut"/>

        <aop:aspect ref="logProviderAdvice">
            <aop:after-returning method="afterReturn" returning="returnObject" pointcut-ref="appDownloadPointCut"/>
            <aop:after-throwing method="afterException" arg-names="exception" throwing="exception" pointcut-ref="appDownloadPointCut"/>
        </aop:aspect>
    </aop:config>-->
</beans>
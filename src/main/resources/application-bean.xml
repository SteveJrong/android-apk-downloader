<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-3.0.xsd">
    <context:component-scan base-package="
        com.stevejrong.android.apk.downloader.config,
        com.stevejrong.android.apk.downloader.provider"/>
    <context:property-placeholder local-override="true" properties-ref="yamlProperties"/>

    <bean id="downloadConfig" class="com.stevejrong.android.apk.downloader.config.download.DownloadConfig">
        <property name="browserName" value="${app.download.browserName}"/>
        <property name="browserWebDriverPath" value="${app.download.browserWebDriverPath}"/>
        <property name="browserDownloadPath" value="${app.download.browserDownloadPath}"/>
        <property name="appDownloadSitesConfig">
            <list>
                <ref bean="anZhiAppDownload"/>
                <ref bean="tencentAppDownload"/>
            </list>
        </property>
        <property name="currentAppListNodeName" value="${app.download.currentAppListNodeName}"/>
    </bean>

    <bean id="anZhiAppDownload" class="com.stevejrong.android.apk.downloader.provider.app.download.appDownload.impl.AnZhiAppDownload">
        <constructor-arg name="searchUrl" value="http://www.anzhi.com/search.php?keyword=#APP_NAME"/>
        <constructor-arg name="htmlAnalysisExpressions">
            <list>
                <value>//div[@class='app_info']/child::span/child::a[text()='#APP_NAME']/ancestor::span[@class='app_name']/ancestor::div[@class='app_info']/following::div[@class='app_down']/child::a[text()='立即下载']</value>
            </list>
        </constructor-arg>
    </bean>
    <bean id="tencentAppDownload" class="com.stevejrong.android.apk.downloader.provider.app.download.appDownload.impl.TencentAppDownload">
        <constructor-arg name="searchUrl" value="https://sj.qq.com/myapp/search.htm?kw=#APP_NAME"/>
        <constructor-arg name="htmlAnalysisExpressions">
            <list>
                <value>//ul[@id='J_SearchDefaultListBox']/child::li/child::div/child::div/child::div/child::a</value>
                <value>//a[@class='det-down-btn']</value>
            </list>
        </constructor-arg>
    </bean>

    <bean id="googleChrome" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.GoogleChromePreferences"/>
    <bean id="mozillaFirefox" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.MozillaFirefoxPreferences"/>
    <bean id="appleSafari" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.AppleSafariPreferences"/>
    <bean id="microsoftEdge" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.MicrosoftEdgePreferences"/>
    <bean id="microsoftInternetExplorer" class="com.stevejrong.android.apk.downloader.provider.app.download.browser.impl.MicrosoftInternetExplorerPreferences"/>

    <bean id="appInstall" class="com.stevejrong.android.apk.downloader.provider.app.install.impl.AppInstallImpl"/>

    <bean id="yamlProperties" class="org.springframework.beans.factory.config.YamlPropertiesFactoryBean">
        <property name="resources" value="classpath:define-config.yml"/>
    </bean>
</beans>